#!/usr/bin/env bash
#
source "$(dirname "$0")/get-script-header.sh"

POLY_DIR="$DEPS_DIR/poly"
version="v0.1.8"

check_dep_dir "$POLY_DIR"
setup_dep \
  "https://github.com/SRI-CSL/libpoly/archive/$version.tar.gz" "$POLY_DIR"

pwd
cd "$POLY_DIR/build/"

CMAKEFLAGS="\
  -DCMAKE_BUILD_TYPE=Release \
  -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR \
  -DLIBPOLY_BUILD_PYTHON_API=OFF \
  -DLIBPOLY_BUILD_STATIC=ON \
  -DLIBPOLY_BUILD_STATIC_PIC=ON \
"

echo "Installing to $INSTALL_DIR"

cmake $CMAKEFLAGS  ../ && make install

echo
echo "Using poly version $version"
echo
echo ===================== Now configure CVC4 with =====================
echo ./configure.sh --poly
